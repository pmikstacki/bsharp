<!DOCTYPE HTML>
<html lang="en" class="dark js">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Analysis Overview - BSharp C# Parser Documentation</title>
    <meta name="robots" content="noindex">
    <!-- BSharp mdBook Custom Head -->
    <meta name="theme-color" content="#00C9B9">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
      /* Additional custom styles */
      .header .left a::before {
        content: "B# ";
        color: #00C9B9;
        font-weight: 700;
      }
      
      /* Force dark theme immediately */
      html, html.light, html.dark {
        color-scheme: dark !important;
      }
      
      html body, body, .light body, .dark body {
        background: linear-gradient(66.77deg, #00C9B9 0%, #003824 100%) !important;
        background-color: transparent !important;
        color: #dfe4e3 !important;
      }
      
      .header, .light .header, .dark .header {
        background-color: rgba(15, 20, 20, 0.7) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
      }
      
      .sidebar, .light .sidebar, .dark .sidebar {
        background-color: rgba(15, 20, 20, 0.7) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
      }
      
      .content, .light .content, .dark .content {
        background-color: rgba(15, 20, 20, 0.6) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        color: #dfe4e3 !important;
      }
      
      /* Hide theme selector */
      .theme-selector {
        display: none !important;
      }
    </style>
    <script>
      // Force dark mode and prevent theme switching
      (function() {
        // Set dark mode immediately
        document.documentElement.classList.remove('light');
        document.documentElement.classList.add('dark');
        localStorage.setItem('mdbook-theme', 'dark');
        
        // Override localStorage to always return dark
        const originalSetItem = localStorage.setItem;
        const originalGetItem = localStorage.getItem;
        
        localStorage.setItem = function(key, value) {
          if (key === 'mdbook-theme') {
            value = 'dark';
          }
          return originalSetItem.call(this, key, value);
        };
        
        localStorage.getItem = function(key) {
          if (key === 'mdbook-theme') {
            return 'dark';
          }
          return originalGetItem.call(this, key);
        };
        
        // Continuously enforce dark mode
        setInterval(function() {
          document.documentElement.classList.remove('light');
          document.documentElement.classList.add('dark');
        }, 50);
        
        // Hide theme selector if it exists
        setTimeout(function() {
          const themeSelector = document.querySelector('.theme-selector');
          if (themeSelector) {
            themeSelector.style.display = 'none';
          }
        }, 100);
      })();
    </script>
</head>
<body>
    <!-- Provide site root to javascript -->
    <script>
        var path_to_root = "../";
        var default_theme = "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script>
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script>
        var html = document.querySelector('html');
        var sidebar = null;
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
            sidebar = sidebar || 'visible';
        } else {
            sidebar = 'hidden';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scroll">
            <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Parser Architecture</li><li class="chapter-item expanded "><a href="parser/overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="parser/core-components.html"><strong aria-hidden="true">2.</strong> Core Components</a></li><li class="chapter-item expanded "><a href="parser/ast-structure.html"><strong aria-hidden="true">3.</strong> AST Structure</a></li><li class="chapter-item expanded "><a href="parser/error-handling.html"><strong aria-hidden="true">4.</strong> Error Handling</a></li><li class="chapter-item expanded affix "><li class="part-title">Parser Modules</li><li class="chapter-item expanded "><a href="parser/expressions.html"><strong aria-hidden="true">5.</strong> Expression Parsing</a></li><li class="chapter-item expanded "><a href="parser/statements.html"><strong aria-hidden="true">6.</strong> Statement Parsing</a></li><li class="chapter-item expanded "><a href="parser/declarations.html"><strong aria-hidden="true">7.</strong> Declaration Parsing</a></li><li class="chapter-item expanded "><a href="parser/types.html"><strong aria-hidden="true">8.</strong> Type System</a></li><li class="chapter-item expanded "><a href="parser/feature-completeness.html"><strong aria-hidden="true">9.</strong> Feature Completeness</a></li><li class="chapter-item expanded "><a href="parser/keywords-and-tokens.html"><strong aria-hidden="true">10.</strong> Keywords and Tokens</a></li><li class="chapter-item expanded affix "><li class="part-title">Advanced Features</li><li class="chapter-item expanded "><a href="parser/navigation.html"><strong aria-hidden="true">11.</strong> Query API</a></li><li class="chapter-item expanded "><a href="parser/comments.html"><strong aria-hidden="true">12.</strong> Comment Parsing</a></li><li class="chapter-item expanded "><a href="parser/preprocessor.html"><strong aria-hidden="true">13.</strong> Preprocessor Directives</a></li><li class="chapter-item expanded affix "><li class="part-title">Syntax</li><li class="chapter-item expanded "><a href="syntax/spans.html"><strong aria-hidden="true">14.</strong> Spans</a></li><li class="chapter-item expanded "><a href="syntax/traits.html"><strong aria-hidden="true">15.</strong> Traits</a></li><li class="chapter-item expanded "><a href="syntax/derive-macros.html"><strong aria-hidden="true">16.</strong> Derive Macros</a></li><li class="chapter-item expanded "><a href="syntax/formatter.html"><strong aria-hidden="true">17.</strong> Formatter and Emitters</a></li><li class="chapter-item expanded affix "><li class="part-title">Analysis Framework</li><li class="chapter-item expanded "><a href="analysis/overview.html"><strong aria-hidden="true">18.</strong> Analysis Overview</a></li><li class="chapter-item expanded "><a href="analysis/pipeline.html"><strong aria-hidden="true">19.</strong> Analysis Pipeline</a></li><li class="chapter-item expanded "><a href="analysis/traversal-guide.html"><strong aria-hidden="true">20.</strong> Traversal Guide</a></li><li class="chapter-item expanded "><a href="analysis/control-flow.html"><strong aria-hidden="true">21.</strong> Control Flow Analysis</a></li><li class="chapter-item expanded "><a href="analysis/dependencies.html"><strong aria-hidden="true">22.</strong> Dependency Analysis</a></li><li class="chapter-item expanded "><a href="analysis/metrics.html"><strong aria-hidden="true">23.</strong> Metrics Collection</a></li><li class="chapter-item expanded "><a href="analysis/types.html"><strong aria-hidden="true">24.</strong> Type Analysis</a></li><li class="chapter-item expanded "><a href="analysis/quality.html"><strong aria-hidden="true">25.</strong> Code Quality</a></li><li class="chapter-item expanded "><a href="analysis/passes-and-rules.html"><strong aria-hidden="true">26.</strong> Passes and Rules</a></li><li class="chapter-item expanded "><a href="analysis/report-schema.html"><strong aria-hidden="true">27.</strong> Report Schema</a></li><li class="chapter-item expanded "><a href="analysis/writing-a-pass.html"><strong aria-hidden="true">28.</strong> Writing a Pass</a></li><li class="chapter-item expanded "><a href="analysis/writing-a-ruleset.html"><strong aria-hidden="true">29.</strong> Writing a Ruleset</a></li><li class="chapter-item expanded affix "><li class="part-title">CLI Tools</li><li class="chapter-item expanded "><a href="cli/overview.html"><strong aria-hidden="true">30.</strong> Command Line Interface</a></li><li class="chapter-item expanded "><a href="cli/parse.html"><strong aria-hidden="true">31.</strong> Parse Command</a></li><li class="chapter-item expanded "><a href="cli/tree.html"><strong aria-hidden="true">32.</strong> Tree Visualization</a></li><li class="chapter-item expanded "><a href="cli/analyze.html"><strong aria-hidden="true">33.</strong> Analysis Command</a></li><li class="chapter-item expanded "><a href="cli/format.html"><strong aria-hidden="true">34.</strong> Format Command</a></li><li class="chapter-item expanded "><a href="cli/errors-json.html"><strong aria-hidden="true">35.</strong> Parse Errors JSON</a></li><li class="chapter-item expanded affix "><li class="part-title">Workspace</li><li class="chapter-item expanded "><a href="workspace/overview.html"><strong aria-hidden="true">36.</strong> Workspace Loading</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="configuration/overview.html"><strong aria-hidden="true">37.</strong> Configuration Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Development</li><li class="chapter-item expanded "><a href="development/contributing.html"><strong aria-hidden="true">38.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="development/testing.html"><strong aria-hidden="true">39.</strong> Testing</a></li><li class="chapter-item expanded "><a href="development/architecture.html"><strong aria-hidden="true">40.</strong> Architecture Decisions</a></li><li class="chapter-item expanded "><a href="development/cookbooks.html"><strong aria-hidden="true">41.</strong> Cookbooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="development/query-cookbook.html"><strong aria-hidden="true">41.1.</strong> Query Cookbook</a></li><li class="chapter-item expanded "><a href="development/parser-cookbook.html"><strong aria-hidden="true">41.2.</strong> Parser Cookbook</a></li></ol></li><li class="chapter-item expanded "><a href="development/writing-tests.html"><strong aria-hidden="true">42.</strong> Writing Tests</a></li><li class="chapter-item expanded "><a href="development/bsharp_tests.html"><strong aria-hidden="true">43.</strong> bsharp_tests Overview</a></li><li class="chapter-item expanded "><a href="development/extending-syntax.html"><strong aria-hidden="true">44.</strong> Extending Syntax (New Nodes)</a></li><li class="chapter-item expanded "><a href="development/writing-parsers.html"><strong aria-hidden="true">45.</strong> Writing Parsers</a></li><li class="chapter-item expanded "><a href="development/compliance/index.html"><strong aria-hidden="true">46.</strong> Compliance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="development/compliance/overview.html"><strong aria-hidden="true">46.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="development/compliance/compliance_guide.html"><strong aria-hidden="true">46.2.</strong> Compliance Guide</a></li><li class="chapter-item expanded "><a href="development/compliance/Generator.html"><strong aria-hidden="true">46.3.</strong> Generator</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Research &amp; Development</li><li class="chapter-item expanded "><a href="cil-runtime/index.html"><strong aria-hidden="true">47.</strong> CIL Runtime</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cil-runtime/overview.html"><strong aria-hidden="true">47.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="cil-runtime/architecture.html"><strong aria-hidden="true">47.2.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="cil-runtime/phases/index.html"><strong aria-hidden="true">47.3.</strong> Phases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cil-runtime/phases/00-dotscope-spike.html"><strong aria-hidden="true">47.3.1.</strong> Phase 0: Dotscope Spike</a></li><li class="chapter-item expanded "><a href="cil-runtime/phases/01-vm-mvp.html"><strong aria-hidden="true">47.3.2.</strong> Phase 1: VM MVP</a></li><li class="chapter-item expanded "><a href="cil-runtime/phases/02-control-flow-and-eh.html"><strong aria-hidden="true">47.3.3.</strong> Phase 2: Control Flow + EH</a></li><li class="chapter-item expanded "><a href="cil-runtime/phases/03-object-model-and-arrays.html"><strong aria-hidden="true">47.3.4.</strong> Phase 3: Object Model and Arrays</a></li><li class="chapter-item expanded "><a href="cil-runtime/phases/04-back-compat-polish.html"><strong aria-hidden="true">47.3.5.</strong> Phase 4: Back-Compat Polish</a></li><li class="chapter-item expanded "><a href="cil-runtime/phases/05-ast-to-il-emitter.html"><strong aria-hidden="true">47.3.6.</strong> Phase 5: AST→IL Emitter</a></li></ol></li><li class="chapter-item expanded "><a href="cil-runtime/dotscope-guide.html"><strong aria-hidden="true">47.4.</strong> dotscope Guide</a></li><li class="chapter-item expanded "><a href="cil-runtime/vm-design.html"><strong aria-hidden="true">47.5.</strong> VM Design</a></li><li class="chapter-item expanded "><a href="cil-runtime/emitter-design.html"><strong aria-hidden="true">47.6.</strong> Emitter Design</a></li><li class="chapter-item expanded "><a href="cil-runtime/testing.html"><strong aria-hidden="true">47.7.</strong> Testing &amp; Conformance</a></li><li class="chapter-item expanded "><a href="cil-runtime/roadmap.html"><strong aria-hidden="true">47.8.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="cil-runtime/open-questions.html"><strong aria-hidden="true">47.9.</strong> Open Questions</a></li><li class="chapter-item expanded "><a href="cil-runtime/glossary.html"><strong aria-hidden="true">47.10.</strong> Glossary</a></li></ol></li></ol>
        </div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">

            <div id="content" class="content">
                <main>
                    <h1 id="analysis-framework-overview"><a class="header" href="#analysis-framework-overview">Analysis Framework Overview</a></h1>
<p>The BSharp analysis framework provides a comprehensive suite of tools for analyzing C# code at various levels of detail. It is built on top of the BSharp parser infrastructure and offers insights into code structure, quality, dependencies, and maintainability. These capabilities support standalone analysis tools and editor/CI integrations.</p>
<h2 id="analysis-architecture"><a class="header" href="#analysis-architecture">Analysis Architecture</a></h2>
<p>The analysis framework is organized into specialized modules:</p>
<pre><code>src/bsharp_analysis/src/
├── framework/        # pipeline, passes, registry, session, walker, query
├── passes/           # indexing, metrics, control_flow, dependencies, reporting
├── artifacts/        # symbols, cfg, dependencies
├── metrics/          # AstAnalysis data + shared helpers
├── rules/            # naming, semantic, control_flow_smells
├── report/           # AnalysisReport assembly
└── (no quality module)
</code></pre>
<h2 id="analysis-capabilities"><a class="header" href="#analysis-capabilities">Analysis Capabilities</a></h2>
<h3 id="control-flow-analysis"><a class="header" href="#control-flow-analysis">Control Flow Analysis</a></h3>
<ul>
<li><strong>Path Analysis</strong>: Identify all possible execution paths through methods</li>
<li><strong>Reachability</strong>: Detect unreachable code sections</li>
<li><strong>Complexity Metrics</strong>: Calculate cyclomatic complexity and other flow-based metrics</li>
<li><strong>Dead Code Detection</strong>: Find code that can never be executed</li>
</ul>
<h3 id="dependency-analysis"><a class="header" href="#dependency-analysis">Dependency Analysis</a></h3>
<ul>
<li><strong>Type Dependencies</strong>: Track relationships between types</li>
<li><strong>Assembly Dependencies</strong>: Analyze external assembly usage</li>
<li><strong>Circular Dependencies</strong>: Detect problematic dependency cycles</li>
<li><strong>Coupling Metrics</strong>: Measure afferent and efferent coupling</li>
</ul>
<h3 id="code-metrics"><a class="header" href="#code-metrics">Code Metrics</a></h3>
<p>Comprehensive metrics collection across multiple dimensions:</p>
<h4 id="complexity-metrics"><a class="header" href="#complexity-metrics">Complexity Metrics</a></h4>
<ul>
<li>Cyclomatic Complexity</li>
<li>Cognitive Complexity</li>
<li>Nesting Depth</li>
<li>Method Length</li>
</ul>
<h4 id="size-metrics"><a class="header" href="#size-metrics">Size Metrics</a></h4>
<ul>
<li>Lines of Code (LOC)</li>
<li>Source Lines of Code (SLOC)</li>
<li>Comment Lines</li>
<li>Method Count per Class</li>
</ul>
<h4 id="maintainability-metrics"><a class="header" href="#maintainability-metrics">Maintainability Metrics</a></h4>
<ul>
<li>Maintainability Index</li>
<li>Technical Debt Indicators</li>
<li>Code Duplication Detection</li>
<li>Halstead Metrics</li>
</ul>
<h3 id="rules"><a class="header" href="#rules">Rules</a></h3>
<ul>
<li><strong>Naming Rules</strong>: Basic naming convention checks</li>
<li><strong>Control Flow Smells</strong>: Simple flow-related smells (e.g., deep nesting warnings)</li>
</ul>
<h3 id="type-analysis"><a class="header" href="#type-analysis">Type Analysis</a></h3>
<ul>
<li><strong>Type Usage</strong>: Track how types are used throughout the codebase</li>
<li><strong>Generic Analysis</strong>: Analyze generic type usage patterns</li>
<li><strong>Inheritance Hierarchies</strong>: Map class and interface hierarchies</li>
<li><strong>Interface Compliance</strong>: Validate interface implementations</li>
</ul>
<h2 id="analysis-workflow"><a class="header" href="#analysis-workflow">Analysis Workflow</a></h2>
<h3 id="1-ast-preparation"><a class="header" href="#1-ast-preparation">1. AST Preparation</a></h3>
<p>All analysis begins with a parsed AST:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let parser = Parser::new();
let compilation_unit = parser.parse(source_code)?;
<span class="boring">}</span></code></pre></pre>
<h3 id="2-pipeline"><a class="header" href="#2-pipeline">2. Pipeline</a></h3>
<p>Use the framework pipeline with registered passes. Per-file runs populate typed artifacts; a final <code>AnalysisReport</code> summarizes metrics, control flow, and dependencies.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bsharp_analysis::framework::pipeline::AnalyzerPipeline;
use bsharp_analysis::framework::session::AnalysisSession;
use bsharp_analysis::context::AnalysisContext;
use bsharp_analysis::report::AnalysisReport;
use bsharp_parser::facade::Parser;

let parser = Parser::new();
let (cu, spans) = parser.parse_with_spans(source_code)?;
let ctx = AnalysisContext::new("file.cs", source_code);
let mut session = AnalysisSession::new(ctx, spans);
AnalyzerPipeline::run_with_defaults(&amp;cu, &amp;mut session);
let report: AnalysisReport = AnalysisReport::from_session(&amp;session);
<span class="boring">}</span></code></pre></pre>
<h3 id="3-analysis-execution"><a class="header" href="#3-analysis-execution">3. Analysis Execution</a></h3>
<p>The pipeline runs passes in phases:</p>
<ul>
<li>Index → Metrics (local) → Global (CFG, deps) → Semantic rules → Reporting</li>
</ul>
<p>Artifacts (e.g., <code>AstAnalysis</code>, <code>ControlFlowIndex</code>, <code>DependencyGraph</code>) are inserted into the <code>AnalysisSession</code> and consumed by reporting.</p>
<h3 id="4-results-processing"><a class="header" href="#4-results-processing">4. Results Processing</a></h3>
<p>Analysis results are structured for easy consumption:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Metrics results
println!("Cyclomatic Complexity: {}", metrics.cyclomatic_complexity);
println!("Lines of Code: {}", metrics.lines_of_code);

// Diagnostics
for d in &amp;report.diagnostics.diagnostics {
    println!("{}: {}", d.code, d.message);
}
<span class="boring">}</span></code></pre></pre>
<h2 id="analysis-registry-and-passes"><a class="header" href="#analysis-registry-and-passes">Analysis Registry and Passes</a></h2>
<p>Analyses are implemented as <code>AnalyzerPass</code> implementations registered in an <code>AnalyzerRegistry</code> and executed by the <code>AnalyzerPipeline</code>. Local rulesets and semantic rulesets run alongside passes based on <code>Phase</code>.</p>
<h2 id="configuration-and-customization"><a class="header" href="#configuration-and-customization">Configuration and Customization</a></h2>
<h3 id="analysis-configuration"><a class="header" href="#analysis-configuration">Analysis Configuration</a></h3>
<p>Analyzers can be configured for different scenarios:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let config = AnalysisConfig {
    max_cyclomatic_complexity: 10,
    max_method_length: 50,
    enforce_naming_conventions: true,
    detect_code_smells: true,
    // ... other configuration options
};

let analyzer = MetricsAnalyzer::with_config(config);
<span class="boring">}</span></code></pre></pre>
<h3 id="custom-rules"><a class="header" href="#custom-rules">Custom Rules</a></h3>
<p>Extend analysis with custom rules:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let custom_analyzer = QualityAnalyzer::new()
    .add_rule(CustomRule::new("no-goto-statements"))
    .add_rule(CustomRule::new("max-parameters", 5))
    .add_rule(CustomRule::new("prefer-composition"));
<span class="boring">}</span></code></pre></pre>
<h3 id="reporting-options"><a class="header" href="#reporting-options">Reporting Options</a></h3>
<p>Flexible reporting formats:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// JSON output
let json_report = analyzer.analyze(&amp;ast).to_json();

// XML output
let xml_report = analyzer.analyze(&amp;ast).to_xml();

// Custom format
let custom_report = analyzer.analyze(&amp;ast).format_with(custom_formatter);
<span class="boring">}</span></code></pre></pre>
<h2 id="integration-points"><a class="header" href="#integration-points">Integration Points</a></h2>
<h3 id="cli-integration"><a class="header" href="#cli-integration">CLI Integration</a></h3>
<p>Analysis capabilities are exposed through the <code>analyze</code> command and configured via options (format, config, include/exclude, enable/disable passes and rulesets, severity overrides). See <code>docs/cli/analyze.md</code> for details.</p>
<h3 id="programmatic-usage"><a class="header" href="#programmatic-usage">Programmatic Usage</a></h3>
<p>Direct integration in tools typically runs the pipeline and pulls artifacts from the session:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bsharp_analysis::context::AnalysisContext;
use bsharp_analysis::framework::{AnalyzerPipeline, AnalysisSession};
use bsharp_analysis::metrics::AstAnalysis;
use bsharp_parser::facade::Parser;

let source = fs::read_to_string(path)?;
let (cu, spans) = Parser::new().parse_with_spans(&amp;source)?;
let mut session = AnalysisSession::new(AnalysisContext::new(path, &amp;source), spans);
AnalyzerPipeline::run_with_defaults(&amp;cu, &amp;mut session);
if let Some(ast) = session.artifacts.get::&lt;AstAnalysis&gt;() {
    println!("methods={} complexity={}", ast.total_methods, ast.cyclomatic_complexity);
}
<span class="boring">}</span></code></pre></pre>
<h2 id="performance-characteristics"><a class="header" href="#performance-characteristics">Performance Characteristics</a></h2>
<h3 id="analysis-performance"><a class="header" href="#analysis-performance">Analysis Performance</a></h3>
<ul>
<li><strong>Incremental Analysis</strong>: Support for analyzing only changed parts</li>
<li><strong>Parallel Processing</strong>: Multi-threaded analysis for large codebases</li>
<li><strong>Memory Efficiency</strong>: Minimal memory overhead during analysis</li>
<li><strong>Caching</strong>: Results caching for repeated analysis</li>
</ul>
<h3 id="scalability"><a class="header" href="#scalability">Scalability</a></h3>
<p>The framework scales from single files to large enterprise codebases:</p>
<ul>
<li>Single file analysis: Sub-second performance</li>
<li>Medium projects (100+ files): Seconds to minutes</li>
<li>Large codebases (1000+ files): Minutes with parallel processing</li>
</ul>
<p>This analysis framework provides the foundation for building sophisticated code quality tools, IDE integrations, and automated code review systems.</p>

                </main>
                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->

                    <div style="clear: both"></div>
                </nav>
            </div>

            <!-- Theme selector removed - forcing dark mode only -->
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
        </nav>
    </div>

    <!-- Livereload script (if served using the mdbook serve command) -->

    <!-- Custom JS scripts -->

    <!-- Force dark mode script -->
    <script>
        // Force dark mode and prevent theme switching
        (function() {
            // Override localStorage before mdBook loads
            var originalSetItem = localStorage.setItem;
            var originalGetItem = localStorage.getItem;
            
            localStorage.setItem = function(key, value) {
                if (key === 'mdbook-theme') {
                    value = 'dark';
                }
                return originalSetItem.call(this, key, value);
            };
            
            localStorage.getItem = function(key) {
                if (key === 'mdbook-theme') {
                    return 'dark';
                }
                return originalGetItem.call(this, key);
            };
            
            // Set dark mode immediately
            localStorage.setItem('mdbook-theme', 'dark');
            
            // Continuously enforce dark mode
            setInterval(function() {
                document.documentElement.classList.remove('light');
                document.documentElement.classList.add('dark');
            }, 10);
            
            // Override any theme switching attempts
            Object.defineProperty(window, 'mdbook', {
                get: function() {
                    return {
                        changeTheme: function() {
                            // Do nothing - prevent theme changes
                        }
                    };
                },
                set: function() {
                    // Do nothing - prevent mdbook override
                }
            });
        })();
        
        // Wait for DOM to be ready and enforce dark mode
        document.addEventListener('DOMContentLoaded', function() {
            setInterval(function() {
                document.documentElement.classList.remove('light');
                document.documentElement.classList.add('dark');
            }, 10);
        });
    </script>
</body>
</html>
